import{a as nt,b as at}from"./chunk-SUYJEOAI.js";import{a as F,b as H,c as N,d as z}from"./chunk-XOZDO7K4.js";import{a as b,b as gt,c as y,d as St,e as ht,f as Mt}from"./chunk-WFOVH5YB.js";import{a as E,b as ct,c as pt,d as mt,e as dt,f as st,g as ut,h as ft,i as Ct,j as _t,k as xt}from"./chunk-SEJVK2QJ.js";import{b as Q}from"./chunk-I3MTP445.js";import"./chunk-5QOOYB6A.js";import"./chunk-JP5PTXCN.js";import"./chunk-XFYJB5AP.js";import{b as ot,g as rt}from"./chunk-ZSOX3E6G.js";import{Be as K,Fa as l,Fb as k,Fd as V,Ja as h,Jd as B,Oa as w,Re as X,Sa as u,Ue as Y,Ve as Z,We as tt,Xd as $,Yd as j,Za as c,Zd as L,Ze as et,_b as D,_e as it,ac as O,gb as o,ha as x,hb as n,hc as R,he as q,ia as g,ib as s,jb as C,jf as lt,kb as _,mb as I,ne as J,ob as S,pb as m,tb as M,te as U,ub as v,vb as A,wb as P,xb as r,yb as T,ye as W,zb as f,ze as G}from"./chunk-3RIX3MIY.js";var At=()=>[5,10,25,100];function Et(e,i){e&1&&(o(0,"th",17),r(1,"Candidate"),n())}function bt(e,i){if(e&1&&(o(0,"td",18)(1,"div",19),s(2,"fa-icon",20),r(3),n()()),e&2){let t=i.$implicit,a=m();l(2),c("icon",a.faUser),l(),f(" ",a.getCandidateName(t.userId)," ")}}function yt(e,i){e&1&&(o(0,"th",17),r(1,"Applied Date"),n())}function wt(e,i){if(e&1&&(o(0,"td",18),r(1),n()),e&2){let t=i.$implicit,a=m();l(),f(" ",a.applicationService.formatDate(t.appliedAt)," ")}}function It(e,i){e&1&&(o(0,"th",17),r(1,"Match Score"),n())}function Pt(e,i){if(e&1&&(o(0,"td",18)(1,"div",21),r(2),n()()),e&2){let t=i.$implicit,a=m();l(),c("ngClass",a.getMatchScoreClass(t.matchScore)),l(),f(" ",t.matchScore,"% ")}}function Tt(e,i){e&1&&(o(0,"th",17),r(1,"Status"),n())}function kt(e,i){if(e&1&&(o(0,"td",18)(1,"mat-chip",22),r(2),n()()),e&2){let t=i.$implicit,a=m();l(),c("color",a.applicationService.getStatusColor(t.status)),l(),f(" ",t.status," ")}}function Dt(e,i){e&1&&(o(0,"th",23),r(1,"Actions"),n())}function Ot(e,i){if(e&1){let t=I();o(0,"td",18)(1,"button",24),s(2,"fa-icon",20),n(),o(3,"mat-menu",null,0)(5,"button",25),S("click",function(){let p=x(t).$implicit,d=m();return g(d.viewApplication(p))}),s(6,"fa-icon",20),o(7,"span"),r(8,"View Details"),n()(),o(9,"button",25),S("click",function(){let p=x(t).$implicit,d=m();return g(d.updateStatus(p.id,d.ApplicationStatus.REVIEWED))}),s(10,"fa-icon",20),o(11,"span"),r(12,"Mark as Reviewed"),n()(),o(13,"button",25),S("click",function(){let p=x(t).$implicit,d=m();return g(d.updateStatus(p.id,d.ApplicationStatus.INTERVIEW))}),s(14,"fa-icon",20),o(15,"span"),r(16,"Schedule Interview"),n()(),o(17,"button",25),S("click",function(){let p=x(t).$implicit,d=m();return g(d.updateStatus(p.id,d.ApplicationStatus.REJECTED))}),s(18,"fa-icon",20),o(19,"span"),r(20,"Reject"),n()()()()}if(e&2){let t=P(4),a=m();l(),c("matMenuTriggerFor",t),l(),c("icon",a.faEllipsisV),l(4),c("icon",a.faEye),l(4),c("icon",a.faCheckCircle),l(4),c("icon",a.faClock),l(4),c("icon",a.faTimesCircle)}}function Rt(e,i){e&1&&s(0,"tr",26)}function Vt(e,i){e&1&&s(0,"tr",27)}function Bt(e,i){if(e&1&&(o(0,"div",32)(1,"p")(2,"strong"),r(3,"Name:"),n(),r(4),n(),o(5,"p")(6,"strong"),r(7,"Email:"),n(),r(8),n(),o(9,"p")(10,"strong"),r(11,"Phone:"),n(),r(12),n(),o(13,"p")(14,"strong"),r(15,"Location:"),n(),r(16),n()()),e&2){let t=m(2);l(4),f(" ",t.selectedCandidate.name,""),l(4),f(" ",t.selectedCandidate.email,""),l(4),f(" ",t.selectedCandidate.phone,""),l(4),f(" ",t.selectedCandidate.location,"")}}function Ft(e,i){if(e&1&&(o(0,"div",28)(1,"h3"),r(2,"Application Details"),n(),o(3,"div",29)(4,"div",30)(5,"h4"),r(6,"Cover Letter"),n(),o(7,"p"),r(8),n()(),o(9,"div",30)(10,"h4"),r(11,"Candidate Information"),n(),u(12,Bt,17,4,"div",31),n()()()),e&2){let t=m();l(8),T(t.selectedApplication.coverLetter),l(4),c("ngIf",t.selectedCandidate)}}var vt=class e{constructor(i,t,a){this.applicationService=i;this.candidateService=t;this.snackBar=a}applications=[];selectedApplication=null;selectedCandidate=null;displayedColumns=["candidateName","appliedAt","matchScore","status","actions"];ApplicationStatus=nt;faUser=q;faEnvelope=W;faFileAlt=L;faCheckCircle=J;faTimesCircle=X;faClock=G;faEye=U;faEllipsisV=K;paginator;sort;table;ngOnInit(){this.loadApplications()}loadApplications(){this.applicationService.getJobApplications("all").subscribe({next:i=>{this.applications=i},error:i=>{console.error("Error loading applications:",i),this.snackBar.open("Failed to load applications. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}getCandidateName(i){return"Loading..."}getMatchScoreClass(i){return i>=80?"high":i>=60?"medium":"low"}viewApplication(i){this.selectedApplication=i,this.candidateService.getCandidateById(i.userId).subscribe({next:t=>{this.selectedCandidate=t},error:t=>{console.error("Error loading candidate details:",t),this.snackBar.open("Failed to load candidate details. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}updateStatus(i,t){this.applicationService.updateApplicationStatus(i,t).subscribe({next:()=>{this.loadApplications(),this.snackBar.open("Application status updated successfully.","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})},error:a=>{console.error("Error updating application status:",a),this.snackBar.open("Failed to update application status. Please try again.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}static \u0275fac=function(t){return new(t||e)(h(at),h(Mt),h(lt))};static \u0275cmp=w({type:e,selectors:[["app-employer-applications"]],viewQuery:function(t,a){if(t&1&&(M(b,5),M(y,5),M(E,5)),t&2){let p;v(p=A())&&(a.paginator=p.first),v(p=A())&&(a.sort=p.first),v(p=A())&&(a.table=p.first)}},decls:27,vars:7,consts:[["menu","matMenu"],[1,"applications-container"],[1,"applications-card"],[1,"applications-content"],["mat-table","","matSort","",1,"applications-table",3,"dataSource"],["matColumnDef","candidateName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appliedAt"],["matColumnDef","matchScore"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["class","application-details",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"candidate-info"],[3,"icon"],[1,"match-score",3,"ngClass"],["selected","",3,"color"],["mat-header-cell",""],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"application-details"],[1,"details-content"],[1,"detail-section"],["class","candidate-details",4,"ngIf"],[1,"candidate-details"]],template:function(t,a){t&1&&(o(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),r(4,"Job Applications"),n()(),o(5,"mat-card-content")(6,"div",3)(7,"table",4),C(8,5),u(9,Et,2,0,"th",6)(10,bt,4,2,"td",7),_(),C(11,8),u(12,yt,2,0,"th",6)(13,wt,2,1,"td",7),_(),C(14,9),u(15,It,2,0,"th",6)(16,Pt,3,2,"td",7),_(),C(17,10),u(18,Tt,2,0,"th",6)(19,kt,3,2,"td",7),_(),C(20,11),u(21,Dt,2,0,"th",12)(22,Ot,21,6,"td",7),_(),u(23,Rt,1,0,"tr",13)(24,Vt,1,0,"tr",14),n(),s(25,"mat-paginator",15),u(26,Ft,13,2,"div",16),n()()()()),t&2&&(l(7),c("dataSource",a.applications),l(16),c("matHeaderRowDef",a.displayedColumns),l(),c("matRowDefColumns",a.displayedColumns),l(),c("pageSize",10)("pageSizeOptions",k(6,At)),l(),c("ngIf",a.selectedApplication))},dependencies:[R,D,O,it,Y,tt,et,Z,B,V,xt,E,pt,ut,mt,ct,ft,dt,st,Ct,_t,gt,b,ht,y,St,rt,ot,Q,z,H,F,N,j,$],styles:[".applications-container[_ngcontent-%COMP%]{padding:20px}.applications-card[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.applications-content[_ngcontent-%COMP%]{padding:20px 0}.applications-table[_ngcontent-%COMP%]{width:100%}.candidate-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.match-score[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-weight:500}.match-score.high[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.match-score.medium[_ngcontent-%COMP%]{background-color:#fff3e0;color:#ef6c00}.match-score.low[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.application-details[_ngcontent-%COMP%]{margin-top:20px;padding:20px;background-color:#f5f5f5;border-radius:4px}.detail-section[_ngcontent-%COMP%]{margin-bottom:20px}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;color:#333}fa-icon[_ngcontent-%COMP%]{margin-right:8px;color:#666}.mat-column-actions[_ngcontent-%COMP%]{width:80px}"]})};export{vt as ApplicationsComponent};
