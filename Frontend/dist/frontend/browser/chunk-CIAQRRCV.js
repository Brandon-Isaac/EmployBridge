import{a as Me,b as ye,c as Ee,d as Ie,e as xe}from"./chunk-SSGIG272.js";import"./chunk-6THW52MI.js";import{b as se,c as de}from"./chunk-C3DRYL2F.js";import{a as Se}from"./chunk-UPT4ULX2.js";import{a as T,c as N,h as L}from"./chunk-QU4DUXWZ.js";import{a as H,b as K}from"./chunk-YMI5JVDF.js";import{d as he,h as ve,i as Ce}from"./chunk-PY6PLAWW.js";import"./chunk-CVCOJAAY.js";import{a as pe}from"./chunk-V3S2WEL6.js";import{a as ce,c as ue,e as fe,f as be,g as ge}from"./chunk-FK2F6IHG.js";import{$b as J,$e as re,Bc as V,Cc as A,Ec as R,Fa as m,Fc as G,Hd as U,Ic as $,Ja as c,Jd as Y,Je as X,Kc as z,Oa as F,Sa as s,Ue as Z,Ve as ee,We as te,Xd as Q,Yd as W,Za as l,Ze as ie,_e as oe,a as k,ac as q,af as ne,b as j,bf as ae,cf as me,ff as le,gb as i,ha as g,hb as e,hc as w,ia as h,ib as u,jf as _e,mb as S,ob as _,pb as v,sc as D,uc as f,wb as C,xb as o,xc as B,yb as P,yc as O,zb as M}from"./chunk-RCQKIGTM.js";function Fe(n,t){n&1&&(i(0,"mat-error"),o(1," Job title is required "),e())}function Pe(n,t){n&1&&(i(0,"mat-error"),o(1," Job description is required "),e())}function Je(n,t){n&1&&(i(0,"mat-error"),o(1," Location is required "),e())}function qe(n,t){n&1&&(i(0,"mat-error"),o(1," Employment type is required "),e())}function we(n,t){n&1&&(i(0,"mat-error"),o(1," Salary must be greater than 0 "),e())}function Te(n,t){n&1&&(i(0,"mat-error"),o(1," Deadline is required "),e())}function Ne(n,t){if(n&1){let r=S();i(0,"mat-chip-row",26),_("removed",function(){let p=g(r).$implicit,d=v();return h(d.removeSkill(p))}),o(1),i(2,"button",27)(3,"mat-icon"),o(4,"cancel"),e()()()}if(n&2){let r=t.$implicit;m(),M(" ",r," ")}}function De(n,t){if(n&1&&u(0,"fa-icon",28),n&2){let r=v();l("icon",r.faSpinner)}}var ke=class n{constructor(t,r,a,p,d,b){this.fb=t;this.jobService=r;this.authService=a;this.router=p;this.route=d;this.snackBar=b;this.jobForm=this.fb.group({title:["",f.required],description:["",f.required],location:["",f.required],employmentType:["",f.required],salary:[null,[f.min(0)]],deadline:[null,f.required]})}jobForm;isSubmitting=!1;isEditMode=!1;jobId=null;requiredSkills=[];faSpinner=X;ngOnInit(){this.jobId=this.route.snapshot.paramMap.get("id"),this.jobId&&(this.isEditMode=!0,this.loadJob())}loadJob(){this.jobId&&this.jobService.getJobById(this.jobId).subscribe({next:t=>{this.jobForm.patchValue({title:t.title,description:t.description,location:t.location,employmentType:t.employmentType,salary:t.salary,deadline:t.deadline}),this.requiredSkills=t.requiredSkills.map(r=>r.name)},error:t=>{console.error("Error loading job:",t),this.snackBar.open("Failed to load job details","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.router.navigate(["/employer/jobs-posted"])}})}addSkill(t){let r=(t.value||"").trim();r&&(this.requiredSkills.push(r),t.chipInput.clear())}removeSkill(t){let r=this.requiredSkills.indexOf(t);r>=0&&this.requiredSkills.splice(r,1)}onSubmit(){if(this.jobForm.invalid)return;this.isSubmitting=!0;let t=this.authService.getCurrentUser();if(!t){this.snackBar.open("You must be logged in to post a job","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.router.navigate(["/login"]);return}let r=j(k({},this.jobForm.value),{requiredSkills:this.requiredSkills.map(p=>({name:p})),employer:{id:t.id,name:t.name,email:t.email}});(this.isEditMode&&this.jobId?this.jobService.updateJob(this.jobId,r):this.jobService.createJob(r)).subscribe({next:()=>{this.snackBar.open(`Job ${this.isEditMode?"updated":"posted"} successfully`,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.router.navigate(["/employer/jobs-posted"])},error:p=>{console.error("Error saving job:",p),this.snackBar.open(p.error?.message||`Failed to ${this.isEditMode?"update":"post"} job`,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.isSubmitting=!1}})}goBack(){this.router.navigate(["/employer/jobs-posted"])}static \u0275fac=function(r){return new(r||n)(c($),c(Se),c(L),c(N),c(T),c(_e))};static \u0275cmp=F({type:n,selectors:[["app-employer-job-posting"]],decls:65,vars:15,consts:[["picker",""],["chipGrid",""],[1,"job-posting-container"],[1,"job-posting-card"],[1,"job-posting-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","e.g., Senior Software Engineer"],[4,"ngIf"],["matInput","","formControlName","description","rows","6","placeholder","Describe the role, responsibilities, and requirements..."],["matInput","","formControlName","location","placeholder","e.g., New York, NY"],["formControlName","employmentType"],["value","Full-time"],["value","Part-time"],["value","Contract"],["value","Temporary"],["value","Internship"],["matInput","","type","number","formControlName","salary","placeholder","e.g., 75000"],["matPrefix",""],["matInput","","formControlName","deadline",3,"matDatepicker"],["matSuffix","",3,"for"],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Add skills...",3,"matChipInputTokenEnd","matChipInputFor"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["animation","spin",3,"icon",4,"ngIf"],[3,"removed"],["matChipRemove",""],["animation","spin",3,"icon"]],template:function(r,a){if(r&1){let p=S();i(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title"),o(4),e()(),i(5,"mat-card-content")(6,"form",4),_("ngSubmit",function(){return g(p),h(a.onSubmit())}),i(7,"mat-form-field",5)(8,"mat-label"),o(9,"Job Title"),e(),u(10,"input",6),s(11,Fe,2,0,"mat-error",7),e(),i(12,"mat-form-field",5)(13,"mat-label"),o(14,"Job Description"),e(),u(15,"textarea",8),s(16,Pe,2,0,"mat-error",7),e(),i(17,"mat-form-field",5)(18,"mat-label"),o(19,"Location"),e(),u(20,"input",9),s(21,Je,2,0,"mat-error",7),e(),i(22,"mat-form-field",5)(23,"mat-label"),o(24,"Employment Type"),e(),i(25,"mat-select",10)(26,"mat-option",11),o(27,"Full-time"),e(),i(28,"mat-option",12),o(29,"Part-time"),e(),i(30,"mat-option",13),o(31,"Contract"),e(),i(32,"mat-option",14),o(33,"Temporary"),e(),i(34,"mat-option",15),o(35,"Internship"),e()(),s(36,qe,2,0,"mat-error",7),e(),i(37,"mat-form-field",5)(38,"mat-label"),o(39,"Salary (Annual)"),e(),u(40,"input",16),i(41,"span",17),o(42,"$\xA0"),e(),s(43,we,2,0,"mat-error",7),e(),i(44,"mat-form-field",5)(45,"mat-label"),o(46,"Application Deadline"),e(),u(47,"input",18)(48,"mat-datepicker-toggle",19)(49,"mat-datepicker",null,0),s(51,Te,2,0,"mat-error",7),e(),i(52,"mat-form-field",5)(53,"mat-label"),o(54,"Required Skills"),e(),i(55,"mat-chip-grid",null,1),s(57,Ne,5,1,"mat-chip-row",20),e(),i(58,"input",21),_("matChipInputTokenEnd",function(b){return g(p),h(a.addSkill(b))}),e()(),i(59,"div",22)(60,"button",23),_("click",function(){return g(p),h(a.goBack())}),o(61,"Cancel"),e(),i(62,"button",24),s(63,De,1,1,"fa-icon",25),o(64),e()()()()()()}if(r&2){let p,d,b,y,E,I,x=C(50),je=C(56);m(4),P(a.isEditMode?"Edit Job":"Post a New Job"),m(2),l("formGroup",a.jobForm),m(5),l("ngIf",(p=a.jobForm.get("title"))==null?null:p.hasError("required")),m(5),l("ngIf",(d=a.jobForm.get("description"))==null?null:d.hasError("required")),m(5),l("ngIf",(b=a.jobForm.get("location"))==null?null:b.hasError("required")),m(15),l("ngIf",(y=a.jobForm.get("employmentType"))==null?null:y.hasError("required")),m(7),l("ngIf",(E=a.jobForm.get("salary"))==null?null:E.hasError("min")),m(4),l("matDatepicker",x),m(),l("for",x),m(3),l("ngIf",(I=a.jobForm.get("deadline"))==null?null:I.hasError("required")),m(6),l("ngForOf",a.requiredSkills),m(),l("matChipInputFor",je),m(4),l("disabled",a.jobForm.invalid||a.isSubmitting),m(),l("ngIf",a.isSubmitting),m(),M(" ",a.isSubmitting?"Saving...":a.isEditMode?"Update Job":"Post Job"," ")}},dependencies:[w,J,q,oe,Z,te,ie,ee,Y,U,pe,le,re,ne,ae,me,de,se,Ce,ve,he,ge,fe,be,ce,ue,K,H,Ie,Me,ye,Ee,xe,z,V,D,A,B,O,R,G,W,Q],styles:[".job-posting-container[_ngcontent-%COMP%]{padding:20px}.job-posting-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.job-posting-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px 0}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:8px}.mat-mdc-chip-input[_ngcontent-%COMP%]{width:100%}"]})};export{ke as JobPostingComponent};
