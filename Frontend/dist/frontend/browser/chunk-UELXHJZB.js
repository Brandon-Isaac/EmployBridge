import{a as k,b as F}from"./chunk-I47L6CKC.js";import{a as ee}from"./chunk-M56VT5KU.js";import{b as K}from"./chunk-FKNFGZ26.js";import{c as w,h as L}from"./chunk-5HGUWRLR.js";import"./chunk-SOPIRXTD.js";import{b as Q,g as X}from"./chunk-6Y5Q3XG4.js";import"./chunk-H5Y25B2D.js";import{$b as E,Da as u,De as N,Fa as n,Gd as B,Hb as S,Id as T,Ie as R,Ja as f,Kb as M,Ke as G,Lb as b,Oa as h,Sa as s,Te as H,Ue as J,Ve as $,Wd as D,We as q,Xd as U,Ye as W,Za as l,Ze as Y,ac as I,ce as z,ee as A,gb as t,gc as O,ha as _,hb as r,hc as j,he as V,ia as y,ib as m,if as Z,mb as v,ob as C,pb as p,wb as P,xb as a,yb as d,zb as g}from"./chunk-ZYTV455T.js";function ne(o,c){if(o&1&&(t(0,"div",5),m(1,"fa-icon",6),t(2,"p"),a(3,"Loading company profile..."),r()()),o&2){let e=p();n(),l("icon",e.faSpinner)}}function oe(o,c){if(o&1){let e=v();t(0,"div",7)(1,"mat-card",8)(2,"mat-card-content"),m(3,"fa-icon",9),t(4,"h2"),a(5,"Error Loading Profile"),r(),t(6,"p"),a(7),r(),t(8,"button",10),C("click",function(){_(e);let x=p();return y(x.retryLoading())}),a(9," Retry "),r()()()()}if(o&2){let e=p();n(3),l("icon",e.faCircleExclamation),n(4),d(e.error)}}function re(o,c){if(o&1&&(t(0,"div",19),m(1,"fa-icon",15),t(2,"a",22),a(3,"Website"),r()()),o&2){let e=p(2);n(),l("icon",e.faGlobe),n(),l("href",e.companyProfile.company.website,u)}}function ae(o,c){if(o&1&&(t(0,"mat-chip"),a(1),r()),o&2){let e=c.$implicit;n(),g(" ",e.name," ")}}function ce(o,c){if(o&1&&(t(0,"mat-card",25)(1,"mat-card-header")(2,"mat-card-title"),a(3),r(),t(4,"mat-card-subtitle"),a(5),r()(),t(6,"mat-card-content")(7,"p"),a(8),S(9,"slice"),r(),t(10,"div",26),s(11,ae,2,1,"mat-chip",27),r()()()),o&2){let e=c.$implicit;n(3),d(e.title),n(2),d(e.location),n(3),g("",M(9,4,e.description,0,150),"..."),n(3),l("ngForOf",e.requiredSkills)}}function le(o,c){if(o&1&&(t(0,"div",23),s(1,ce,12,8,"mat-card",24),r()),o&2){let e=p(2);n(),l("ngForOf",e.companyProfile.jobs)}}function me(o,c){o&1&&(t(0,"p"),a(1,"No open positions at the moment."),r())}function pe(o,c){if(o&1){let e=v();t(0,"mat-card",11)(1,"mat-card-header")(2,"div",12)(3,"img",13),C("error",function(x){_(e);let ie=p();return y(ie.handleImageError(x))}),r(),t(4,"div",14)(5,"mat-card-title"),a(6),r(),t(7,"mat-card-subtitle"),m(8,"fa-icon",15),a(9),r()()()(),t(10,"mat-card-content")(11,"div",16)(12,"section",17)(13,"h3"),a(14,"About"),r(),t(15,"p"),a(16),r()(),m(17,"mat-divider"),t(18,"section",17)(19,"h3"),a(20,"Details"),r(),t(21,"div",18)(22,"div",19),m(23,"fa-icon",15),t(24,"span"),a(25),r()(),t(26,"div",19),m(27,"fa-icon",15),t(28,"span"),a(29),r()(),s(30,re,4,2,"div",20),r()(),m(31,"mat-divider"),t(32,"section",17)(33,"h3"),a(34,"Open Positions"),r(),s(35,le,2,1,"div",21)(36,me,2,0,"ng-template",null,0,b),r()()()()}if(o&2){let e=P(37),i=p();n(3),l("src",i.companyProfile.company.logo||"assets/default-company.png",u),n(3),d(i.companyProfile.company.name),n(2),l("icon",i.faBuilding),n(),g(" ",i.companyProfile.company.industry," "),n(7),d(i.companyProfile.company.description),n(7),l("icon",i.faLocationDot),n(2),d(i.companyProfile.company.location),n(2),l("icon",i.faUsers),n(2),g("",i.companyProfile.company.employeeCount," Employees"),n(),l("ngIf",i.companyProfile.company.website),n(5),l("ngIf",(i.companyProfile==null?null:i.companyProfile.jobs)&&i.companyProfile.jobs.length>0)("ngIfElse",e)}}var te=class o{constructor(c,e,i,x){this.companyService=c;this.authService=e;this.router=i;this.snackBar=x}companyProfile=null;isLoading=!0;error=null;faBuilding=G;faLocationDot=N;faUsers=A;faGlobe=V;faSpinner=R;faCircleExclamation=z;ngOnInit(){this.loadCompanyProfile()}loadCompanyProfile(){this.isLoading=!0,this.error=null;let c=this.authService.getCurrentUser();if(!c||c.role!=="employer"){this.error="You must be logged in as a company to view the profile",this.isLoading=!1,this.router.navigate(["/login"]);return}this.companyService.getCompanyByUserId(c.id).subscribe({next:e=>{this.companyService.getCompanyProfile(e.id).subscribe({next:i=>{this.companyProfile=i,this.isLoading=!1},error:i=>{console.error("Error fetching company profile:",i),this.error=i.error?.message||"Failed to load company profile. Please try again.",this.isLoading=!1,this.snackBar.open(this.error||"An error occurred","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})},error:e=>{console.error("Error fetching company:",e),this.error="Failed to load company information",this.isLoading=!1,this.snackBar.open(this.error,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}retryLoading(){this.loadCompanyProfile()}handleImageError(c){let e=c.target;e.src="assets/default-company.png"}static \u0275fac=function(e){return new(e||o)(f(ee),f(L),f(w),f(Z))};static \u0275cmp=h({type:o,selectors:[["app-employer-profile"]],decls:4,vars:3,consts:[["noJobs",""],[1,"profile-container"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","profile-card",4,"ngIf"],[1,"loading-container"],["animation","spin","size","2x",3,"icon"],[1,"error-container"],[1,"error-card"],["size","2x",1,"error-icon",3,"icon"],["mat-raised-button","","color","primary",3,"click"],[1,"profile-card"],[1,"header-content"],["alt","Company Logo",1,"company-logo",3,"error","src"],[1,"header-text"],[3,"icon"],[1,"profile-content"],[1,"info-section"],[1,"details-grid"],[1,"detail-item"],["class","detail-item",4,"ngIf"],["class","jobs-grid",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"jobs-grid"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-tags"],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(t(0,"div",1),s(1,ne,4,1,"div",2)(2,oe,10,2,"div",3)(3,pe,38,12,"mat-card",4),r()),e&2&&(n(),l("ngIf",i.isLoading),n(),l("ngIf",i.error),n(),l("ngIf",i.companyProfile&&!i.isLoading&&!i.error))},dependencies:[j,E,I,O,Y,H,$,W,q,J,T,B,F,k,X,Q,K,U,D],styles:[".profile-container[_ngcontent-%COMP%]{padding:20px;min-height:400px}.profile-card[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.profile-content[_ngcontent-%COMP%]{padding:20px 0}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;width:100%}.company-logo[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:8px}.header-text[_ngcontent-%COMP%]{flex:1}.info-section[_ngcontent-%COMP%]{margin:20px 0}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:10px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.jobs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:10px}.job-card[_ngcontent-%COMP%]{height:100%}.job-tags[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}fa-icon[_ngcontent-%COMP%]{color:#666}a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:20px}.error-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.error-card[_ngcontent-%COMP%]{text-align:center;padding:20px}.error-icon[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}"]})};export{te as ProfileComponent};
