import{a as xe,b as Fe,c as Je,d as Te,e as we}from"./chunk-SSGIG272.js";import"./chunk-6THW52MI.js";import{b as ge,c as he}from"./chunk-C3DRYL2F.js";import{a as Ie}from"./chunk-UPT4ULX2.js";import{a as P,c as D,h as Y}from"./chunk-QU4DUXWZ.js";import{b as H}from"./chunk-YMI5JVDF.js";import{d as Me,h as ke,i as je}from"./chunk-PY6PLAWW.js";import"./chunk-CVCOJAAY.js";import{a as be}from"./chunk-V3S2WEL6.js";import{a as _e,c as ve,e as Se,f as Ce,g as Ee}from"./chunk-FK2F6IHG.js";import{$b as T,$e as se,Bc as O,Cc as V,Ec as R,Fa as r,Fc as G,Fe as ee,Hd as $,Ic as z,Ie as te,Ja as u,Jd as L,Je as ie,Kc as U,Oa as F,Oe as oe,Sa as s,Se as re,Ue as ne,Ve as ae,We as me,Xd as K,Xe as le,Yd as Q,Za as a,Ze as pe,_d as W,_e as de,a as j,ac as w,af as ce,b as x,cf as ue,ff as fe,gb as o,ha as g,hb as e,hc as q,ia as h,ib as d,jf as ye,mb as C,ob as _,pb as v,sc as N,uc as f,ue as X,wb as E,xb as m,xc as B,xe as Z,yb as J,yc as A,zb as S}from"./chunk-RCQKIGTM.js";function De(l,t){l&1&&(o(0,"mat-error"),m(1," Job title is required "),e())}function Ne(l,t){l&1&&(o(0,"mat-error"),m(1," Job description is required "),e())}function Be(l,t){l&1&&(o(0,"mat-error"),m(1," Location is required "),e())}function Ae(l,t){l&1&&(o(0,"mat-error"),m(1," Employment type is required "),e())}function Oe(l,t){l&1&&(o(0,"mat-error"),m(1," Salary must be greater than 0 "),e())}function Ve(l,t){l&1&&(o(0,"mat-error"),m(1," Deadline is required "),e())}function Re(l,t){if(l&1){let n=C();o(0,"mat-chip-row",28),_("removed",function(){let p=g(n).$implicit,c=v();return h(c.removeSkill(p))}),m(1),o(2,"button",29),d(3,"fa-icon",24),e()()}if(l&2){let n=t.$implicit,i=v();r(),S(" ",n," "),r(2),a("icon",i.faTimes)}}function Ge(l,t){if(l&1&&d(0,"fa-icon",30),l&2){let n=v();a("icon",n.faSpinner)}}function ze(l,t){if(l&1&&d(0,"fa-icon",24),l&2){let n=v();a("icon",n.faSave)}}var qe=class l{constructor(t,n,i,p,c,b){this.fb=t;this.jobService=n;this.authService=i;this.router=p;this.route=c;this.snackBar=b;this.jobForm=this.fb.group({title:["",f.required],description:["",f.required],location:["",f.required],employmentType:["",f.required],salary:[null,[f.min(0)]],deadline:[null,f.required]})}jobForm;isSubmitting=!1;isEditMode=!1;jobId=null;requiredSkills=[];faSpinner=ie;faSave=X;faTimes=te;faMapMarkerAlt=ee;faBriefcase=oe;faDollarSign=re;faCalendarAlt=W;faTag=Z;ngOnInit(){this.jobId=this.route.snapshot.paramMap.get("id"),this.jobId&&(this.isEditMode=!0,this.loadJob())}loadJob(){this.jobId&&this.jobService.getJobById(this.jobId).subscribe({next:t=>{this.jobForm.patchValue({title:t.title,description:t.description,location:t.location,employmentType:t.employmentType,salary:t.salary,deadline:t.deadline}),this.requiredSkills=t.requiredSkills.map(n=>n.name)},error:t=>{console.error("Error loading job:",t),this.snackBar.open("Failed to load job details","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.router.navigate(["/employer/jobs-posted"])}})}addSkill(t){let n=(t.value||"").trim();n&&(this.requiredSkills.push(n),t.chipInput.clear())}removeSkill(t){let n=this.requiredSkills.indexOf(t);n>=0&&this.requiredSkills.splice(n,1)}onSubmit(){if(this.jobForm.invalid)return;this.isSubmitting=!0;let t=this.authService.getCurrentUser();if(!t){this.snackBar.open("You must be logged in to post a job","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.router.navigate(["/login"]);return}let n=x(j({},this.jobForm.value),{requiredSkills:this.requiredSkills.map(p=>({name:p})),employer:{id:t.id,name:t.name,email:t.email}});(this.isEditMode&&this.jobId?this.jobService.updateJob(this.jobId,n):this.jobService.createJob(n)).subscribe({next:()=>{this.snackBar.open(`Job ${this.isEditMode?"updated":"created"} successfully`,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.router.navigate(["/employer/jobs-posted"])},error:p=>{console.error("Error saving job:",p),this.snackBar.open(p.error?.message||`Failed to ${this.isEditMode?"update":"create"} job`,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.isSubmitting=!1}})}goBack(){this.router.navigate(["/employer/jobs-posted"])}static \u0275fac=function(n){return new(n||l)(u(z),u(Ie),u(Y),u(D),u(P),u(ye))};static \u0275cmp=F({type:l,selectors:[["app-edit-job"]],decls:72,vars:23,consts:[["picker",""],["chipGrid",""],[1,"edit-job-container"],[1,"edit-job-card"],[1,"edit-job-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","e.g., Senior Software Engineer"],[4,"ngIf"],["matInput","","formControlName","description","rows","6","placeholder","Describe the role, responsibilities, and requirements..."],["matInput","","formControlName","location","placeholder","e.g., New York, NY"],[1,"field-icon",3,"icon"],["formControlName","employmentType"],["value","Full-time"],["value","Part-time"],["value","Contract"],["value","Temporary"],["value","Internship"],["matInput","","type","number","formControlName","salary","placeholder","e.g., 75000"],["matInput","","formControlName","deadline",3,"matDatepicker"],["matSuffix","",3,"for"],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Add skills...",3,"matChipInputTokenEnd","matChipInputFor"],[1,"form-actions"],["mat-button","","type","button",3,"click"],[3,"icon"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["animation","spin",3,"icon",4,"ngIf"],[3,"icon",4,"ngIf"],[3,"removed"],["matChipRemove",""],["animation","spin",3,"icon"]],template:function(n,i){if(n&1){let p=C();o(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title"),m(4),e(),o(5,"mat-card-subtitle"),m(6),e()(),o(7,"mat-card-content")(8,"form",4),_("ngSubmit",function(){return g(p),h(i.onSubmit())}),o(9,"mat-form-field",5)(10,"mat-label"),m(11,"Job Title"),e(),d(12,"input",6),s(13,De,2,0,"mat-error",7),e(),o(14,"mat-form-field",5)(15,"mat-label"),m(16,"Job Description"),e(),d(17,"textarea",8),s(18,Ne,2,0,"mat-error",7),e(),o(19,"mat-form-field",5)(20,"mat-label"),m(21,"Location"),e(),d(22,"input",9)(23,"fa-icon",10),s(24,Be,2,0,"mat-error",7),e(),o(25,"mat-form-field",5)(26,"mat-label"),m(27,"Employment Type"),e(),o(28,"mat-select",11)(29,"mat-option",12),m(30,"Full-time"),e(),o(31,"mat-option",13),m(32,"Part-time"),e(),o(33,"mat-option",14),m(34,"Contract"),e(),o(35,"mat-option",15),m(36,"Temporary"),e(),o(37,"mat-option",16),m(38,"Internship"),e()(),d(39,"fa-icon",10),s(40,Ae,2,0,"mat-error",7),e(),o(41,"mat-form-field",5)(42,"mat-label"),m(43,"Salary (Annual)"),e(),d(44,"input",17)(45,"fa-icon",10),s(46,Oe,2,0,"mat-error",7),e(),o(47,"mat-form-field",5)(48,"mat-label"),m(49,"Application Deadline"),e(),d(50,"input",18)(51,"mat-datepicker-toggle",19)(52,"mat-datepicker",null,0)(54,"fa-icon",10),s(55,Ve,2,0,"mat-error",7),e(),o(56,"mat-form-field",5)(57,"mat-label"),m(58,"Required Skills"),e(),o(59,"mat-chip-grid",null,1),s(61,Re,4,2,"mat-chip-row",20),e(),o(62,"input",21),_("matChipInputTokenEnd",function(b){return g(p),h(i.addSkill(b))}),e(),d(63,"fa-icon",10),e(),o(64,"div",22)(65,"button",23),_("click",function(){return g(p),h(i.goBack())}),d(66,"fa-icon",24),m(67," Cancel "),e(),o(68,"button",25),s(69,Ge,1,1,"fa-icon",26)(70,ze,1,1,"fa-icon",27),m(71),e()()()()()()}if(n&2){let p,c,b,M,y,I,k=E(53),Pe=E(60);r(4),J(i.isEditMode?"Edit Job":"Create New Job"),r(2),S(" ",i.isEditMode?"Update the job details below":"Fill in the job details below"," "),r(2),a("formGroup",i.jobForm),r(5),a("ngIf",(p=i.jobForm.get("title"))==null?null:p.hasError("required")),r(5),a("ngIf",(c=i.jobForm.get("description"))==null?null:c.hasError("required")),r(5),a("icon",i.faMapMarkerAlt),r(),a("ngIf",(b=i.jobForm.get("location"))==null?null:b.hasError("required")),r(15),a("icon",i.faBriefcase),r(),a("ngIf",(M=i.jobForm.get("employmentType"))==null?null:M.hasError("required")),r(5),a("icon",i.faDollarSign),r(),a("ngIf",(y=i.jobForm.get("salary"))==null?null:y.hasError("min")),r(4),a("matDatepicker",k),r(),a("for",k),r(3),a("icon",i.faCalendarAlt),r(),a("ngIf",(I=i.jobForm.get("deadline"))==null?null:I.hasError("required")),r(6),a("ngForOf",i.requiredSkills),r(),a("matChipInputFor",Pe),r(),a("icon",i.faTag),r(3),a("icon",i.faTimes),r(2),a("disabled",i.jobForm.invalid||i.isSubmitting),r(),a("ngIf",i.isSubmitting),r(),a("ngIf",!i.isSubmitting),r(),S(" ",i.isSubmitting?"Saving...":i.isEditMode?"Update Job":"Create Job"," ")}},dependencies:[q,T,w,de,ne,me,pe,le,ae,L,$,be,fe,se,ce,ue,he,ge,je,ke,Me,Ee,Se,Ce,_e,ve,H,Te,xe,Fe,Je,we,U,O,N,V,B,A,R,G,Q,K],styles:[".edit-job-container[_ngcontent-%COMP%]{padding:20px}.edit-job-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.edit-job-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px 0}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px}.field-icon[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);color:#666}mat-form-field[_ngcontent-%COMP%]{margin-bottom:8px}.mat-mdc-chip-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:8px}"]})};export{qe as EditJobComponent};
