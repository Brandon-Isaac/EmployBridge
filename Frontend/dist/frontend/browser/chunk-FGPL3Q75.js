import{a as L,b as D,c as N,d as U}from"./chunk-YCZVNXYZ.js";import{a as me}from"./chunk-UPT4ULX2.js";import{c as k,h as B}from"./chunk-QU4DUXWZ.js";import{b as se,g as le}from"./chunk-FK2F6IHG.js";import{$b as j,Ae as W,Ee as X,Fa as i,Fd as V,Hb as C,Hd as A,Ib as y,Ja as _,Jd as F,Je as Z,Kb as S,Oa as M,Oe as ee,Re as te,Sa as x,Ue as ie,Ve as ne,We as oe,Xd as $,Xe as re,Yd as z,Za as c,Ze as ae,_d as R,_e as ce,ac as J,dc as E,de as Y,ec as I,ee as q,fc as O,fe as H,gb as t,gc as w,ge as G,ha as g,hb as r,hc as T,ia as b,ib as p,jf as pe,mb as h,ne as K,ob as d,pb as m,wb as P,we as Q,xb as s,yb as v,zb as f}from"./chunk-RCQKIGTM.js";function fe(a,n){if(a&1&&(t(0,"div",8),p(1,"fa-icon",9),t(2,"p"),s(3,"Loading jobs..."),r()()),a&2){let e=m();i(),c("icon",e.faSpinner)}}function ge(a,n){if(a&1){let e=h();t(0,"div",10)(1,"mat-card",11)(2,"mat-card-content"),p(3,"fa-icon",12),t(4,"h2"),s(5,"Error Loading Jobs"),r(),t(6,"p"),s(7),r(),t(8,"button",3),d("click",function(){g(e);let o=m();return b(o.loadJobs())}),s(9," Retry "),r()()()()}if(a&2){let e=m();i(3),c("icon",e.faCircleExclamation),i(4),v(e.error)}}function be(a,n){if(a&1&&(t(0,"div",23),p(1,"fa-icon",18),t(2,"span"),s(3),C(4,"currency"),r()()),a&2){let e=m().$implicit,l=m(2);i(),c("icon",l.faMoneyBill),i(2),v(y(4,2,e.salary))}}function ue(a,n){if(a&1&&(t(0,"mat-chip"),s(1),r()),a&2){let e=n.$implicit;i(),f(" ",e.name," ")}}function _e(a,n){if(a&1){let e=h();t(0,"mat-card",15)(1,"mat-card-header")(2,"div",16)(3,"div",17)(4,"mat-card-title"),s(5),r(),t(6,"mat-card-subtitle"),p(7,"fa-icon",18),s(8),r()(),t(9,"button",19),p(10,"fa-icon",18),r(),t(11,"mat-menu",null,0)(13,"button",20),d("click",function(){let o=g(e).$implicit,u=m(2);return b(u.editJob(o))}),p(14,"fa-icon",18),t(15,"span"),s(16,"Edit"),r()(),t(17,"button",20),d("click",function(){let o=g(e).$implicit,u=m(2);return b(u.viewApplications(o))}),p(18,"fa-icon",18),t(19,"span"),s(20,"View Applications"),r()(),t(21,"button",20),d("click",function(){let o=g(e).$implicit,u=m(2);return b(u.deleteJob(o))}),p(22,"fa-icon",18),t(23,"span"),s(24,"Delete"),r()()()()(),t(25,"mat-card-content")(26,"p",21),s(27),C(28,"slice"),r(),t(29,"div",22)(30,"div",23),p(31,"fa-icon",18),t(32,"span"),s(33),r()(),x(34,be,5,4,"div",24),t(35,"div",23),p(36,"fa-icon",18),t(37,"span"),s(38),r()(),t(39,"div",23),p(40,"fa-icon",18),t(41,"span"),s(42),C(43,"date"),r()()(),t(44,"div",25),x(45,ue,2,1,"mat-chip",26),r(),t(46,"div",27)(47,"mat-chip",28),p(48,"fa-icon",18),s(49),C(50,"titlecase"),r()()()()}if(a&2){let e=n.$implicit,l=P(12),o=m(2);i(5),v(e.title),i(2),c("icon",o.faLocationDot),i(),f(" ",e.location," "),i(),c("matMenuTriggerFor",l),i(),c("icon",o.faEllipsisVertical),i(4),c("icon",o.faEdit),i(4),c("icon",o.faUsers),i(4),c("icon",o.faTrash),i(5),f("",S(28,20,e.description,0,150),"..."),i(4),c("icon",o.faBriefcase),i(2),v(e.employmentType),i(),c("ngIf",e.salary),i(2),c("icon",o.faUsers),i(2),f("",o.getApplicationCount(e)," Applications"),i(2),c("icon",o.faCalendarAlt),i(2),f("Posted ",y(43,24,e.createdAt),""),i(3),c("ngForOf",e.requiredSkills),i(2),c("color",o.isJobOpen(e)?"primary":"warn"),i(),c("icon",o.isJobOpen(e)?o.faCheckCircle:o.faTimesCircle),i(),f(" ",y(50,26,o.getJobStatus(e))," ")}}function xe(a,n){if(a&1&&(t(0,"div",13),x(1,_e,51,28,"mat-card",14),r()),a&2){let e=m();i(),c("ngForOf",e.jobs)}}function ve(a,n){if(a&1){let e=h();t(0,"div",29)(1,"mat-card")(2,"mat-card-content")(3,"h2"),s(4,"No Jobs Posted Yet"),r(),t(5,"p"),s(6,"Start posting jobs to find the perfect candidates for your company."),r(),t(7,"button",3),d("click",function(){g(e);let o=m();return b(o.navigateToJobPosting())}),s(8," Post Your First Job "),r()()()()}}var de=class a{constructor(n,e,l,o){this.jobService=n;this.authService=e;this.router=l;this.snackBar=o}jobs=[];isLoading=!0;error=null;faSpinner=Z;faCircleExclamation=Y;faBriefcase=ee;faLocationDot=X;faUsers=H;faCalendarAlt=R;faEllipsisVertical=W;faEdit=q;faTrash=Q;faMoneyBill=G;faCheckCircle=K;faTimesCircle=te;ngOnInit(){this.loadJobs()}getApplicationCount(n){return n.applications?.length||0}getJobStatus(n){return n.deadline?new Date(n.deadline)>new Date?"open":"closed":"open"}isJobOpen(n){return this.getJobStatus(n)==="open"}loadJobs(){this.isLoading=!0,this.error=null;let n=this.authService.getCurrentUser();if(!n||n.role!=="employer"){this.error="You must be logged in as a company to view posted jobs",this.isLoading=!1,this.router.navigate(["/login"]);return}this.jobService.getJobsByEmployer(n.id).subscribe({next:e=>{this.jobs=e,this.isLoading=!1},error:e=>{console.error("Error fetching jobs:",e),this.error=e.error?.message||"Failed to load jobs. Please try again.",this.isLoading=!1,this.snackBar.open(this.error||"An error occurred","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}navigateToJobPosting(){this.router.navigate(["/employer/job-posting"])}editJob(n){this.router.navigate(["/employer/job-posting",n.id])}viewApplications(n){this.router.navigate(["/employer/applications",n.id])}deleteJob(n){confirm("Are you sure you want to delete this job posting?")&&this.jobService.deleteJob(n.id).subscribe({next:()=>{this.snackBar.open("Job deleted successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.loadJobs()},error:e=>{console.error("Error deleting job:",e),this.snackBar.open(e.error?.message||"Failed to delete job","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}static \u0275fac=function(e){return new(e||a)(_(me),_(B),_(k),_(pe))};static \u0275cmp=M({type:a,selectors:[["app-jobs-posted"]],decls:10,vars:4,consts:[["menu","matMenu"],[1,"jobs-posted-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","jobs-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],["animation","spin","size","2x",3,"icon"],[1,"error-container"],[1,"error-card"],["size","2x",1,"error-icon",3,"icon"],[1,"jobs-grid"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-header"],[1,"job-title-section"],[3,"icon"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"job-description"],[1,"job-details"],[1,"detail-item"],["class","detail-item",4,"ngIf"],[1,"job-tags"],[4,"ngFor","ngForOf"],[1,"job-status"],["selected","",3,"color"],[1,"empty-state"]],template:function(e,l){e&1&&(t(0,"div",1)(1,"div",2)(2,"h1"),s(3,"Jobs Posted"),r(),t(4,"button",3),d("click",function(){return l.navigateToJobPosting()}),s(5," Post New Job "),r()(),x(6,fe,4,1,"div",4)(7,ge,10,2,"div",5)(8,xe,2,1,"div",6)(9,ve,9,0,"div",7),r()),e&2&&(i(6),c("ngIf",l.isLoading),i(),c("ngIf",l.error),i(),c("ngIf",!l.isLoading&&!l.error),i(),c("ngIf",!l.isLoading&&!l.error&&(!l.jobs||l.jobs.length===0)))},dependencies:[T,j,J,w,E,O,I,ce,ie,oe,ae,re,ne,F,A,V,le,se,U,D,L,N,z,$],styles:[".jobs-posted-container[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.jobs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.job-card[_ngcontent-%COMP%]{height:100%}.job-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;width:100%}.job-title-section[_ngcontent-%COMP%]{flex:1}.job-description[_ngcontent-%COMP%]{margin:16px 0;color:#666}.job-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px 0}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666}.job-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:16px 0}.job-status[_ngcontent-%COMP%]{margin-top:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:20px}.error-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.error-card[_ngcontent-%COMP%]{text-align:center;padding:20px}.error-icon[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]{max-width:600px;margin:40px auto;text-align:center}fa-icon[_ngcontent-%COMP%]{color:#666}mat-menu-item[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:8px}.job-status[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:4px}"]})};export{de as JobsPostedComponent};
